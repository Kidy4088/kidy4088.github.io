(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{607:function(s,t,n){"use strict";n.r(t);var a=n(2),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"_1-拦截器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-拦截器"}},[s._v("#")]),s._v(" 1. 拦截器")]),s._v(" "),n("h3",{attrs:{id:"_1-1-handlerinterceptor-接口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-handlerinterceptor-接口"}},[s._v("#")]),s._v(" 1.1 HandlerInterceptor 接口")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 登录检查\n * 1、配置好拦截器要拦截哪些请求\n * 2、把这些配置放在容器中\n */")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Slf4j")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LoginInterceptor")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HandlerInterceptor")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 目标方法执行之前\n     * @param request\n     * @param response\n     * @param handler\n     * @return\n     * @throws Exception\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("preHandle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletRequest")]),s._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletResponse")]),s._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" requestURI "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequestURI")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"preHandle拦截的请求路径是{}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("requestURI"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//登录检查逻辑")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpSession")]),s._v(" session "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSession")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" loginUser "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" session"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"loginUser"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loginUser "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//放行")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//拦截住。未登录。跳转到登录页")]),s._v("\n        request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"msg"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"请先登录"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//        re.sendRedirect("/");')]),s._v("\n        request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequestDispatcher")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("forward")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 目标方法执行完成以后\n     * @param request\n     * @param response\n     * @param handler\n     * @param modelAndView\n     * @throws Exception\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("postHandle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletRequest")]),s._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletResponse")]),s._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ModelAndView")]),s._v(" modelAndView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"postHandle执行{}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("modelAndView"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n     * 页面渲染以后\n     * @param request\n     * @param response\n     * @param handler\n     * @param ex\n     * @throws Exception\n     */")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("afterCompletion")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletRequest")]),s._v(" request"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletResponse")]),s._v(" response"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" handler"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" ex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        log"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"afterCompletion执行异常{}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("ex"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br")])]),n("h3",{attrs:{id:"_1-2-配置拦截器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-配置拦截器"}},[s._v("#")]),s._v(" 1.2 配置拦截器")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('/**\n * 1、编写一个拦截器实现HandlerInterceptor接口\n * 2、拦截器注册到容器中（实现WebMvcConfigurer的addInterceptors）\n * 3、指定拦截规则【如果是拦截所有，静态资源也会被拦截】\n */\n@Configuration\npublic class AdminWebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new LoginInterceptor())\n                .addPathPatterns("/**")  //所有请求都被拦截包括静态资源\n                .excludePathPatterns("/","/login","/css/**","/fonts/**","/images/**","/js/**"); //放行的请求\n    }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"_1-3-拦截器原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-拦截器原理"}},[s._v("#")]),s._v(" 1.3 拦截器原理")]),s._v(" "),n("p",[s._v("1、根据当前请求，找到**HandlerExecutionChain【**可以处理请求的handler以及handler的所有 拦截器】")]),s._v(" "),n("p",[s._v("2、先来"),n("strong",[s._v("顺序执行")]),s._v(" 所有拦截器的 preHandle方法")]),s._v(" "),n("ul",[n("li",[s._v("1、如果当前拦截器prehandler返回为true。则执行下一个拦截器的preHandle")]),s._v(" "),n("li",[s._v("2、如果当前拦截器返回为false。直接   倒序执行所有已经执行了的拦截器的  afterCompletion；")])]),s._v(" "),n("p",[n("strong",[s._v("3、如果任何一个拦截器返回false。直接跳出不执行目标方法")])]),s._v(" "),n("p",[n("strong",[s._v("4、所有拦截器都返回True。执行目标方法")])]),s._v(" "),n("p",[n("strong",[s._v("5、倒序执行所有拦截器的postHandle方法。")])]),s._v(" "),n("p",[n("strong",[s._v("6、前面的步骤有任何异常都会直接倒序触发")]),s._v(" afterCompletion")]),s._v(" "),n("p",[s._v("7、页面成功渲染完成以后，也会倒序触发 afterCompletion")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183051.png",alt:"image.png"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183057.png",alt:"image.png"}})]),s._v(" "),n("h2",{attrs:{id:"_2-文件上传"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-文件上传"}},[s._v("#")]),s._v(" 2. 文件上传")]),s._v(" "),n("h3",{attrs:{id:"_2-1-页面表单"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-页面表单"}},[s._v("#")]),s._v(" 2.1 页面表单")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('<form method="post" action="/upload" enctype="multipart/form-data">\n    <input type="file" name="file"><br>\n    <input type="submit" value="提交">\n</form>\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_2-2-文件上传代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-文件上传代码"}},[s._v("#")]),s._v(" 2.2 文件上传代码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('    /**\n     * MultipartFile 自动封装上传过来的文件\n     * @param email\n     * @param username\n     * @param headerImg\n     * @param photos\n     * @return\n     */\n    @PostMapping("/upload")\n    public String upload(@RequestParam("email") String email,\n                         @RequestParam("username") String username,\n                         @RequestPart("headerImg") MultipartFile headerImg,\n                         @RequestPart("photos") MultipartFile[] photos) throws IOException {\n\n        log.info("上传的信息：email={}，username={}，headerImg={}，photos={}",\n                email,username,headerImg.getSize(),photos.length);\n\n        if(!headerImg.isEmpty()){\n            //保存到文件服务器，OSS服务器\n            String originalFilename = headerImg.getOriginalFilename();\n            headerImg.transferTo(new File("H:\\\\cache\\\\"+originalFilename));\n        }\n\n        if(photos.length > 0){\n            for (MultipartFile photo : photos) {\n                if(!photo.isEmpty()){\n                    String originalFilename = photo.getOriginalFilename();\n                    photo.transferTo(new File("H:\\\\cache\\\\"+originalFilename));\n                }\n            }\n        }\n\n\n        return "main";\n    }\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("h3",{attrs:{id:"_2-3-自动配置原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-自动配置原理"}},[s._v("#")]),s._v(" 2.3 自动配置原理")]),s._v(" "),n("p",[n("strong",[s._v("文件上传自动配置类-MultipartAutoConfiguration-MultipartProperties")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("自动配置好了 "),n("strong",[s._v("StandardServletMultipartResolver  【文件上传解析器】")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("原理步骤")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("1、请求进来使用文件上传解析器判断（"),n("strong",[s._v("isMultipart")]),s._v("）并封装（"),n("strong",[s._v("resolveMultipart，"),n("strong",[s._v("返回")]),s._v("MultipartHttpServletRequest")]),s._v("）文件上传请求")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("2、参数解析器来解析请求中的文件内容封装成MultipartFile")])])]),s._v(" "),n("li",[n("p",[s._v("**3、将request中文件信息封装为一个Map；**MultiValueMap<String, MultipartFile>")])])]),s._v(" "),n("p",[n("strong",[s._v("FileCopyUtils")]),s._v("。实现文件流的拷贝")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('@PostMapping("/upload")\npublic String upload(@RequestParam("email") String email,\n                     @RequestParam("username") String username,\n                     @RequestPart("headerImg") MultipartFile headerImg,\n                     @RequestPart("photos") MultipartFile[] photos)\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183104.png",alt:"image.png"}})]),s._v(" "),n("h2",{attrs:{id:"_3-异常处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-异常处理"}},[s._v("#")]),s._v(" 3. 异常处理")]),s._v(" "),n("h3",{attrs:{id:"_3-1-错误处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-错误处理"}},[s._v("#")]),s._v(" 3.1 错误处理")]),s._v(" "),n("h4",{attrs:{id:"_3-1-1-默认规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-默认规则"}},[s._v("#")]),s._v(" 3.1.1 默认规则")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("默认情况下，Spring Boot提供"),n("code",[s._v("/error")]),s._v("处理所有错误的映射")])]),s._v(" "),n("li",[n("p",[s._v("对于机器客户端，它将生成 JSON 响应，其中包含错误，HTTP状态和异常消息的详细信息。对于浏览器客户端，响应一个“ whitelabel”错误视图，以HTML格式呈现相同的数据")])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183109.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183134.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("要对其进行自定义，添加 "),n("code",[s._v("View")]),s._v(" 解析为 "),n("code",[s._v("error")])])])]),s._v(" "),n("li",[n("p",[s._v("要完全替换默认行为，可以实现 "),n("code",[s._v("ErrorController")]),s._v("并注册该类型的Bean定义，或添加"),n("code",[s._v("ErrorAttributes 类型的组件")]),s._v("以使用现有机制但替换其内容。")])]),s._v(" "),n("li",[n("p",[s._v("error/下的4xx，5xx页面会被自动解析；")])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183117.png",alt:"image.png"}})])])]),s._v(" "),n("h4",{attrs:{id:"_3-1-2-定制错误处理逻辑"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-定制错误处理逻辑"}},[s._v("#")]),s._v(" 3.1.2 定制错误处理逻辑")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("自定义错误页")])]),s._v(" "),n("li",[n("p",[s._v("error/404.html  error/5xx.html；有精确的错误状态码页面就匹配精确，没有就找 4xx.html；如果都没有就触发白页")])]),s._v(" "),n("li",[n("p",[s._v("@ControllerAdvice+@ExceptionHandler处理全局异常；底层是 "),n("strong",[s._v("ExceptionHandlerExceptionResolver 支持的")])])]),s._v(" "),n("li",[n("p",[s._v("@ResponseStatus+自定义异常 ；底层是 "),n("strong",[s._v("ResponseStatusExceptionResolver ，把responsestatus注解的信息底层调用")]),s._v(" "),n("strong",[s._v("response.sendError(statusCode, resolvedReason)；tomcat发送的/error")])])]),s._v(" "),n("li",[n("p",[s._v("Spring底层的异常，如 参数类型转换异常；"),n("strong",[s._v("DefaultHandlerExceptionResolver 处理框架底层的异常。")])])]),s._v(" "),n("li",[n("p",[s._v("response.sendError(HttpServletResponse."),n("strong",[s._v("SC_BAD_REQUEST")]),s._v(", ex.getMessage());")])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183140.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[s._v("自定义实现 HandlerExceptionResolver 处理异常；可以作为默认的全局异常处理规则")])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183144.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("ErrorViewResolver")]),s._v("  实现自定义处理异常；")])]),s._v(" "),n("li",[n("p",[s._v("response.sendError 。error请求就会转给controller")])]),s._v(" "),n("li",[n("p",[s._v("你的异常没有任何人能处理。tomcat底层 response.sendError。error请求就会转给controller")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("basicErrorController 要去的页面地址是")]),s._v(" "),n("strong",[s._v("ErrorViewResolver")]),s._v("  ；")])])]),s._v(" "),n("h4",{attrs:{id:"_3-1-3-异常处理自动配置原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-异常处理自动配置原理"}},[s._v("#")]),s._v(" 3.1.3 异常处理自动配置原理")]),s._v(" "),n("ul",[n("li",[n("p",[n("strong",[s._v("ErrorMvcAutoConfiguration  自动配置异常处理规则")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("容器中的组件：类型：DefaultErrorAttributes ->")]),s._v(" "),n("strong",[s._v("id：errorAttributes")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("public class")]),s._v(" "),n("strong",[s._v("DefaultErrorAttributes")]),s._v(" "),n("strong",[s._v("implements")]),s._v(" "),n("strong",[s._v("ErrorAttributes")]),s._v(", "),n("strong",[s._v("HandlerExceptionResolver")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("DefaultErrorAttributes")]),s._v("：定义错误页面中可以包含哪些数据。")])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183150.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183202.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("容器中的组件：类型：BasicErrorController --\x3e id：basicErrorController（json+白页 适配响应）")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("处理默认")]),s._v(" "),n("strong",[s._v("/error 路径的请求；页面响应")]),s._v(" "),n("strong",[s._v("new")]),s._v(" ModelAndView("),n("strong",[s._v('"error"')]),s._v(", model)；")])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("容器中有组件 View")]),s._v("->"),n("strong",[s._v("id是error")]),s._v("；（响应默认错误页）")])]),s._v(" "),n("li",[n("p",[s._v("容器中放组件 "),n("strong",[s._v("BeanNameViewResolver（视图解析器）；按照返回的视图名作为组件的id去容器中找View对象。")])])]),s._v(" "),n("li",[n("p",[s._v("**容器中的组件：**类型：**DefaultErrorViewResolver -> id：**conventionErrorViewResolver")])]),s._v(" "),n("li",[n("p",[s._v("如果发生错误，会以HTTP的状态码 作为视图页地址（viewName），找到真正的页面")])]),s._v(" "),n("li",[n("p",[s._v("error/404、5xx.html")])])]),s._v(" "),n("p",[s._v("如果想要返回页面；就会找error视图【"),n("strong",[s._v("StaticView")]),s._v("】。(默认是一个白页)")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183206.png",alt:"image.png"}})]),s._v(" "),n("p",[s._v("写出去json")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183210.png",alt:"image.png"}})]),s._v(" "),n("h4",{attrs:{id:"_3-1-4-异常处理步骤流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-异常处理步骤流程"}},[s._v("#")]),s._v(" 3.1.4 异常处理步骤流程")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("执行目标方法，目标方法运行期间有任何异常都会被catch、而且标志当前请求结束；并且用 "),n("strong",[s._v("dispatchException")])])]),s._v(" "),n("li",[n("p",[s._v("进入视图解析流程（页面渲染？）")])])]),s._v(" "),n("p",[s._v("processDispatchResult(processedRequest, response, mappedHandler, "),n("strong",[s._v("mv")]),s._v(", "),n("strong",[s._v("dispatchException")]),s._v(");")]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[n("strong",[s._v("mv")]),s._v(" = "),n("strong",[s._v("processHandlerException")]),s._v("；处理handler发生的异常，处理完成返回ModelAndView；")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("1、遍历所有的 "),n("strong",[s._v("handlerExceptionResolvers，看谁能处理当前异常【HandlerExceptionResolver处理器异常解析器】")])])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183218.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("2、系统默认的  异常解析器；")])])]),s._v(" "),n("li",[n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183242.png",alt:"image.png"}})])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("1. DefaultErrorAttributes 先来处理异常。把异常信息保存到rrequest域，并且返回null；")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("2. 默认没有任何人能处理异常，所以异常会被抛出")])]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("1. 如果没有任何人能处理最终底层就会发送 /error 请求。会被底层的BasicErrorController处理")])]),s._v(" "),n("li",[n("strong",[s._v("2. 解析错误视图；遍历所有的")]),s._v(" "),n("strong",[s._v("ErrorViewResolver  看谁能解析。")])]),s._v(" "),n("li",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210306183246.png",alt:"image.png"}})]),s._v(" "),n("li",[n("strong",[s._v("3. 默认的")]),s._v(" "),n("strong",[s._v("DefaultErrorViewResolver ,作用是把响应状态码作为错误页的地址，error/500.html")])]),s._v(" "),n("li",[n("strong",[s._v("4. 模板引擎最终响应这个页面")]),s._v(" "),n("strong",[s._v("error/500.html")])])])])]),s._v(" "),n("h2",{attrs:{id:"_4-web-原生组件注入-servlet、filter、listener"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-web-原生组件注入-servlet、filter、listener"}},[s._v("#")]),s._v(" 4. Web 原生组件注入（Servlet、Filter、Listener）")]),s._v(" "),n("h3",{attrs:{id:"_4-1-使用-servlet-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-使用-servlet-api"}},[s._v("#")]),s._v(" 4.1 使用 Servlet API")]),s._v(" "),n("p",[s._v("@ServletComponentScan(basePackages = "),n("strong",[s._v('"xyz.kidy.admin"')]),s._v(") :指定原生Servlet组件都放在那里")]),s._v(" "),n("p",[s._v("@WebServlet(urlPatterns = "),n("strong",[s._v('"/my"')]),s._v(")：效果：直接响应，"),n("strong",[s._v("没有经过 Spring 的拦截器？")])]),s._v(" "),n("p",[s._v("@WebFilter(urlPatterns={"),n("strong",[s._v('"/css/*"')]),s._v(","),n("strong",[s._v('"/images/*"')]),s._v("})")]),s._v(" "),n("p",[s._v("@WebListener")]),s._v(" "),n("p",[s._v("推荐可以这种方式；")]),s._v(" "),n("p",[s._v("扩展：DispatchServlet 如何注册进来")]),s._v(" "),n("ul",[n("li",[s._v("容器中自动配置了 DispatcherServlet 属性绑定到 WebMvcProperties；对应的配置文件配置项是 "),n("strong",[s._v("spring.mvc。")])]),s._v(" "),n("li",[n("strong",[s._v("通过")]),s._v(" "),n("strong",[s._v("ServletRegistrationBean")]),s._v("<DispatcherServlet> 把 DispatcherServlet  配置进来。")]),s._v(" "),n("li",[s._v("默认映射的是 / 路径。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Kidy4088/Pic/20210308105945.png",alt:"image.png"}})]),s._v(" "),n("p",[s._v("Tomcat-Servlet；")]),s._v(" "),n("p",[s._v("多个Servlet都能处理到同一层路径，精确优选原则")]),s._v(" "),n("p",[s._v("A： /my/")]),s._v(" "),n("p",[s._v("B： /my/1")]),s._v(" "),n("h3",{attrs:{id:"_4-2-使用-registrationbean"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-使用-registrationbean"}},[s._v("#")]),s._v(" 4.2. 使用 RegistrationBean")]),s._v(" "),n("p",[n("code",[s._v("ServletRegistrationBean")]),s._v(", "),n("code",[s._v("FilterRegistrationBean")]),s._v(", and "),n("code",[s._v("ServletListenerRegistrationBean")])]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Configuration")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyRegistConfig")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletRegistrationBean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("myServlet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyServlet")]),s._v(" myServlet "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyServlet")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletRegistrationBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myServlet"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/my"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/my02"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterRegistrationBean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("myFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyFilter")]),s._v(" myFilter "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MyFilter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//        return new FilterRegistrationBean(myFilter,myServlet());")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterRegistrationBean")]),s._v(" filterRegistrationBean "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterRegistrationBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("myFilter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        filterRegistrationBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setUrlPatterns")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Arrays")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("asList")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/my"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/css/*"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" filterRegistrationBean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Bean")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletListenerRegistrationBean")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("myListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySwervletContextListener")]),s._v(" mySwervletContextListener "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySwervletContextListener")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletListenerRegistrationBean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mySwervletContextListener"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);